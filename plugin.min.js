tinymce.PluginManager.add("facebookembed",function(a){function c(){a.windowManager.open({title:"Embed Facebook post",width:400,height:110,body:[{type:"textbox",name:"post",label:"Embed code"},{type:"container",label:"Width",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:4,size:3,onchange:!1,ariaLabel:"Width"}]}],onsubmit:function(b){var c,d,e,f;c=b.data.post.match(/(https?:\/\/)?(www.)?facebook.com\/([\S]+\/(posts|permalink|photos|videos)\/(\d|[a-zA-Z0-9.\/\?type=\d])+|permalink.php\?story_fbid=\d+&amp;id=\d+|photo.php\?[a-zA-Z=]+\d+|video.php\?[a-zA-Z=]+\d+|media\/set\/\?set=[a-zA-Z0-9.]+)/gi),null===c?f=!0:c.length||(f=!0),f||(e=parseInt(b.data.width),d=document.createElement("img"),d.src=tinymce.baseURL+"/plugins/facebookembed/img/facebookembedpost-tinymce-placeholder.png",d.setAttribute("data-post",c[0]),d.setAttribute("data-width",e?e:960),a.insertContent(d.outerHTML))}})}a.addButton("facebookembed",{text:"Facebook embed",icon:!1,context:"toolbar",onclick:function(){c()}}),a.addMenuItem("facebookembed",{text:"Embed Facebook post",context:"insert",onclick:function(){c()}})});